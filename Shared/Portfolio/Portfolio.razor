<div class="container" id="portfolio">
    <section class="bg-white border-bottom box-shadow mb-3">
        <h1>Portfolio</h1>
    </section>

    <div id="popupModal" class="modal" style="@modalStyle">
        <span class="close" @onclick="@CloseModal">&times;</span>
        <img src="@imageSource" class="modal-content" id="modalImage" />
        <div id="hiddenCaption">@modalContent</div>
    </div>
    
    <div class="container">
        <div>
            <table class="table" cellspacing="100">
                <thead class="table-dark">
                <tr>
                    <th colspan="5" class="h2">Github Projects</th>
                </tr>
                </thead>
                <tbody>
                    <OpensourceComponent name="ASP.NET/Blazor Website" url="https://github.com/CallumMcLoughlin/callummcLoughlin.github.io" badges="C#,WASM,ASP.NET,HTML,CSS"
                                         paragraph=
                                         "This website was built specifically to showcase my skills and knowledge across a broad range of frameworks and languages.
                                          Written in C# with ASP.NET, more specifically Blazor."
                    />
                    <OpensourceComponent name="VueCertbot" url="https://github.com/CallumMcLoughlin/VueCertbot" badges="Docker,Shell,Vue"
                                         paragraph=
                                         "VueCertbot is bunch of scripts, Docker, and config files intended to be used to quickly setup a Vue webapp with a Let's Encrypt certificate and Nginx hosting.
                                          This project allows quick setup of a website through multiple Docker containers alongside automatic renewals of an SSL Certificate."
                    
                    />
                    <OpensourceComponent name="Search Engine Optimization" url="https://github.com/CallumMcLoughlin/smartestman" badges="Vue,HTML,CSS,SEO"
                                         paragraph=
                                         "While not officially being the smartest man in New Zealand, I thought it'd be a fun project to see if I could
                                          use Search Engine Optimization on a website to show me at the top of the results, and have a featured snippet showing me as such."
                    />
                    <OpensourceComponent name="MazeSearcher" url="https://github.com/CallumMcLoughlin/MazeSearcher" badges="Java,Maven"
                                         paragraph=
                                         "A program written in Java, using JavaFX with BootstrapFX. This program is intended to be used to visualize how different
                                          searching algorithms search different user drawn mazes from a start node to a goal node.
                                          This program was written with MVC design principals and uses Maven for the build process
                                          alongside JUnit for automated unit testing."
                    />
                    <OpensourceComponent name="ProcessReader" url="https://github.com/CallumMcLoughlin/ProcessReader" badges="C#"
                                         paragraph=
                                         "A simple C# Program to read another processes' memory, uses platform invocation to call native Windows C functions
                                          from C# in order to accomplish this."
                    />
                    <OpensourceComponent name="KingdomsSim" url="https://github.com/CallumMcLoughlin/KingdomsSim" badges="C#,Monogame,XNA"
                                         paragraph=
                                         "This project was written in C# using the Monogame framework which is continuation of the XNA framework. The main goal was to
                                          simulate 'kingdoms' where each pixel is a unit, and each colour is a kingdom, which can attack any colour that is not it's own."
                    />
                </tbody>
            </table>
        </div>
    </div>
    
    <div class="container">
        <div>
            <table class="table" cellspacing="100">
                <thead class="table-dark">
                <tr>
                    <th colspan="5" class="h2">Opensource Contributions</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td colspan="1">
                        <a href="https://github.com/OpenSC/libp11" target="_blank">libp11</a>
                    </td>
                    <td colspan="3">
                        <p>
                            Written in C, libp11 is made up of two libraries, a higher level interface to communicate 
                            and interact with PKCS11 objects, and a PKCS11 engine plugin for OpenSSL which allows accessing 
                            PKCS#11 modules in a semi-transparent way.
                        </p>
                        <p>
                            My contributions involved identifying and fixing an issue with using the libraries on different endian platforms.
                            My patch fixed an issue where adding a boolean attribute truncates the value and depending on the endianness of the system 
                            can result in the wrong value being added.
                        </p>
                        <a href="https://github.com/OpenSC/libp11/pull/386">Merged Pull Request</a>
                    </td>
                    <td colspan="1">
                        <Badge badges="C"/>
                    </td>
                </tr>
                <tr>
                    <td colspan="1">
                        <a href="https://github.com/discord-csharp/MODiX" target="_blank">MODiX</a>
                    </td>
                    <td colspan="3">
                        <p>
                            Fixed issues related to formatting returned data from a REPL service (User input execution program), where if the code to be 
                            returned was an empty string ("") or similar, would display the wrong output.
                        </p>
                        <a href="https://github.com/discord-csharp/MODiX/pull/941">Merged Pull Request</a>
                    </td>
                    <td colspan="1">
                        <Badge badges="C#"/>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
    
    <div class="container">
        <table class="table" cellspacing="100">
            <thead class="table-dark">
                <tr>
                    <th class="h2">Screenshots (Click for more info)</th>
                </tr>
            </thead>
        </table>
        <div class="row align-items-">
            <div>
                <ClickableImage OnClick="ModalHandler" imageTitle="UltimateTow.co.nz" imageSource="images/ultimate_tow_banner.png" hiddenParagraph="paragraphs/ultimate_tow_1.txt"/>
            </div>
            <div class="col">
                <ClickableImage OnClick="ModalHandler" imageTitle="Search Engine Optimization" imageSource="images/smartest_man.png" hiddenParagraph="paragraphs/smartest_man.txt" sourceLink="https://github.com/CallumMcLoughlin/smartestman" linkText="Github Page for Project"/>
                <ClickableImage OnClick="ModalHandler" imageTitle="Unity Mobile App" imageSource="images/2020P1.png" hiddenParagraph="paragraphs/2020P1.txt"/>
                <div style="display:block;">
                    <h3 style="text-align: center">Procedural Generation with Parallax</h3>
                    <video controls autoplay src="/images/2018P2.webm" class="img-fluid img-thumbnail"></video>
                    <br/>
                </div>
            </div>
            <div class="col">
                <ClickableImage OnClick="ModalHandler" imageTitle="Perlin Noise Procedural Generation of Terrain" imageSource="images/2018P1.png" hiddenParagraph="paragraphs/2018P1.txt"/>
                <br>
                <ClickableImage OnClick="ModalHandler" imageTitle="JavaFX Maze Searcher" imageSource="images/2020P2.png" hiddenParagraph="paragraphs/2020P2.txt" sourceLink="https://github.com/CallumMcLoughlin/MazeSearcher" linkText="Github Page for Project"/>
            </div>
        </div>
        <div class="row">
            <div class="col">
                <ClickableImage OnClick="ModalHandler" imageTitle="KingdomsSim Simulation of Territory" imageSource="images/2018P3.gif" hiddenParagraph="paragraphs/2018P3.txt" sourceLink="https://github.com/CallumMcLoughlin/KingdomsSim" linkText="Github Page for Project"/>
                <ClickableImage OnClick="ModalHandler" imageTitle="ChalkRoll" imageSource="images/2019P1.png" hiddenParagraph="paragraphs/2019P1.txt" sourceLink="https://play.google.com/store/apps/details?id=com.Callum_M.ChalkRoll" linkText="Get from Google Play Store"/>
            </div>
        </div>
    </div>
</div>

@code {
    private string imageSource;
    private string modalContent;
    private string modalStyle = "display: hidden";

    private void ModalHandler(Tuple<String, String> clickedResource)
    {
        imageSource = clickedResource.Item1;
        modalContent = clickedResource.Item2;
        ShowModal();
    }

    private void CloseModal()
    {
        modalStyle = "display: none";
    }

    private void ShowModal()
    {
        modalStyle = "display: block";
    }
}